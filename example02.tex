% !TeX root = example02.tex
% !TeX program = xelatex
\input{tikz_preamble}

\begin{document}
\pagestyle{empty}

\begin{tikzpicture}
    \begin{groupplot}[
        group style = {group size = 2 by 1,horizontal sep=1.5cm},
        height = 10cm,
        width = 6.5 in
        ]
    \nextgroupplot[standard,
        clip=false,
        domain=-0.5:0.5, 
        view={0}{90},
        xticklabels={,,},
        yticklabels={,,},
        width=0.33\textwidth,
        height=0.33\textwidth,
        xtick={0},
        ytick={0},
        enlarge x limits=0,
        enlarge y limits=0,
        xticklabels={$x$},
        yticklabels={$y$},
        ]
        \draw (axis cs:0,-0.5,0) -- (axis cs:0,0.5,0);
        \draw (axis cs:-0.6,0,0) -- (axis cs:0.6,0,0);
        \addplot3[RYB1,thick,
                quiver={
                u={2*sin(4*3.14159*x)*cos(4*3.14159*y)}, 
                v={-2*cos(4*3.14159*x)*sin(4*3.14159*y)}, 
                scale arrows=0.5}, -latex,samples=10
                ] {0};
        \node[inner sep=0pt] at (axis cs:0,0) {\includegraphics[scale=0.2]{data/capsule.png}};
        \draw[very thick,latex-latex] (axis cs:-0.4,-0.55) -- (axis cs:-0.7,-0.55) -- (axis cs:-0.7,-0.3);
        \node[above] at (axis cs:-0.7,-0.3) {$\hby$};
        \node[right] at (axis cs:-0.4,-0.55) {$\hbx$};

    \nextgroupplot[standard,
        xticklabels={,,},
        yticklabels={,,},
        clip=false,
        width=0.33\textwidth,
        height=0.33\textwidth/2,
        yshift=0.25in,
        xticklabel style={/pgf/number format/fixed},
        yticklabel style={/pgf/number format/fixed},
        scaled x ticks=false,
        axis lines=middle,
        axis line style={-},
        xmin=0,xmax=4*pi,
        ymax=1.1,ymin=-1.1,
        xlabel=$t/T$,
        xtick={1.5708, 3.14159, 4.71239, 6.28319, 7.85398, 9.42478, 10.9956,12.5664},
        ytick={-1,-0.5,0.5,1},
        xticklabels={,$1/2$,,$1$,,$3/2$,,$2$},
        yticklabels={$-\dot\gamma$,,,$\dot\gamma$},
        x label style={at={(axis description cs:1.17,0.43)}},
        y label style={at={(axis description cs:-0.09,1.1)}},
        enlarge x limits=0,enlarge y limits=0,
        legend style={
            at={(axis cs:2*pi,1.1)},
            anchor=south,legend columns=6,
            legend cell align=left,draw=none,fill=none
        },
        ]
        \addplot[domain=0:4*pi,RYB1,smooth,thick,samples=200]{sin(deg(x))}; 
        \addplot[domain=0:4*pi,RYB2,smooth,thick,dashed,samples=200]{-1.*sin(deg(x))}; 
        \legend{$u_1^\infty (t)/x \;\;$, $u_2^\infty (t)/y$};
        
        \node[text width=5cm,anchor=center] at (axis cs:2*pi,-1.9) {
        \begin{equation*}
            \bu^\infty(\bx) = \dot\epsilon_0 \text{sin} \left( \frac{2 \pi t}{T} \right) \left[ x \,\hbx - y \,\hby \right]
        \end{equation*}
        };
    \end{groupplot}
\end{tikzpicture} 

\end{document}
